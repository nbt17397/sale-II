import PropTypes from 'prop-types';
import { forwardRef, useContext } from 'react';
import { Link as RouterLink } from 'react-router-dom';
// @mui
import { useTheme } from '@mui/material/styles';
import { Box, Link, Stack, Tooltip, Typography } from '@mui/material';
import { UserContext } from 'src/global';

// ----------------------------------------------------------------------

const Logo = forwardRef(({ disabledLink = false, sx, openNav, ...other }, ref) => {
  const theme = useTheme();
  const { setLoading } = useContext(UserContext)


  // OR using local (public folder)
  // -------------------------------------------------------
  // const logo = (
  //   <Box
  //     component="img"
  //     src="/logo/logo_single.svg" => your path
  //     sx={{ width: 40, height: 40, cursor: 'pointer', ...sx }}
  //   />
  // );

  const logo = (
    <Box
      ref={ref}
      component="div"
      sx={{
        width: '100%',
        height: 100,
        display: 'inline-flex',
        ...sx,
      }}
      {...other}
    >
      <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlnsXlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
        viewBox="0 0 612 792" xmlSpace="preserve">
        <g>
          <path fill="#057CC0" d="M157.63,550.85c2.34-3.87,4.36-7.27,6.43-10.63c18.5-29.95,37-59.89,55.51-89.84
		c10.25-16.59,20.53-33.15,30.7-49.78c1.24-2.03,2.54-3.13,4.97-2.83c2.05,0.25,4.17-0.24,6.66,0.43
		c-10.26,44.56-20.5,89.06-30.9,134.24c4.69,0,8.83-0.01,12.97,0c7.53,0.01,7.51,0.01,9.2-7.33c5.99-26.09,11.99-52.17,18.01-78.25
		c0.38-1.65,0.8-3.31,1.41-4.88c0.78-2.02,2.39-3.11,4.51-2.4c2,0.67,1.63,2.49,1.27,4.09c-2.74,12.07-5.48,24.15-8.25,36.21
		c-3.81,16.64-7.65,33.28-11.47,49.92c-0.18,0.77-0.41,1.55,0.16,2.69c6.01,0,12.17,0.01,18.34-0.01c1.73-0.01,1.62-1.47,1.88-2.58
		c3.08-13.23,6.19-26.45,9.23-39.69c3.94-17.13,7.83-34.28,11.74-51.41c0.53-2.34,1.05-4.68,0.7-7.11
		c-0.8-5.57-4.93-9.35-10.53-9.63c-4.5-0.23-8.82,0.57-12.9,2.28c-0.97-0.56-0.86-1.3-0.66-2.13c1.77-7.36,3.59-14.71,5.24-22.1
		c0.41-1.84,1.25-2.4,3.05-2.39c34.13,0.05,68.27,0.06,102.4,0.04c2,0,3.26,0.66,4.35,2.43c21.56,35.02,43.19,70,64.8,104.99
		c7.65,12.38,15.3,24.75,22.93,37.14c1.69,2.74,3.26,5.55,5.02,8.56c-61.63,0-122.86,0-184.45,0c1.51-6.62,2.96-13.01,4.57-20.08
		c3.49,3.1,7.42,3.75,11.55,3.65c8.15-0.2,15.41-5.4,17.52-13.43c2.97-11.3,5.43-22.73,8.06-34.11
		c3.48-15.08,6.87-30.19,10.36-45.27c1.33-5.76,1.43-11.26-3.67-15.34c-5.71-4.57-12.02-4.9-18.55-1.89
		c-1.53,0.7-2.93,1.68-4.43,2.56c-0.94-0.92-0.59-2.27-1.4-3.77c-4.47,0-9.21-0.03-13.96,0.01c-1.54,0.01-1.5,1.41-1.73,2.4
		c-3.45,14.99-6.86,29.98-10.3,44.97c-5.97,25.99-11.97,51.97-17.88,77.97c-0.44,1.95-1.31,2.51-3.24,2.51
		c-38.62-0.05-77.25-0.04-115.87-0.05C160.06,551.03,159.18,550.94,157.63,550.85z M377.01,472.06c6.77,0,12.94,0,19.1,0
		c1.15,0,1.53-0.75,1.74-1.69c2.19-9.85,4.68-19.64,6.48-29.56c1.62-8.92-2.25-15.39-10.46-17.19c-16.29-3.58-32.98,1.04-37.78,21.9
		c-4.53,19.66-9.09,39.31-13.59,58.98c-1.07,4.67-2.37,9.31-2.46,14.14c-0.15,7.86,3.64,12.94,11.2,14.88
		c5.4,1.38,10.9,1.28,16.34,0.24c8.91-1.71,15.16-6.82,18.59-15.25c2.61-6.42,3.57-13.29,5.17-19.98c1.01-4.22,2.36-8.4,2.65-13.24
		c-5.48,0-10.66,0.22-15.81-0.08c-3.34-0.2-5.09,0.78-5.25,4.2c-0.01,0.3-0.09,0.59-0.16,0.89c-1.83,7.77-3.61,15.56-5.55,23.31
		c-0.56,2.26-1.91,4.33-4.64,3.5c-2.49-0.75-1.77-3.1-1.37-4.88c5.08-22.29,10.22-44.58,15.38-66.85c0.36-1.54,0.79-3.11,1.96-4.32
		c1-1.04,2.25-1.36,3.56-0.9c1.4,0.48,1.51,1.77,1.38,3c-0.12,1.19-0.38,2.37-0.65,3.53C380.97,454.93,379.06,463.18,377.01,472.06z
		"/>
          <path fill="#057CC0" d="M286.66,342.91c-0.6-0.93,0.24-1.48,0.62-2.09c8.5-13.78,17.01-27.54,25.53-41.3
		c2.68-4.33,5.35-8.66,8.24-13.35c11.65,18.86,23.11,37.39,34.88,56.45c-6.78-1.73-13.02-3.33-19.25-4.93
		c-0.96-0.25-1.99-0.38-2.87-0.8c-9.93-4.68-19.37-0.9-28.92,1.56c-6.06,1.56-12.05,3.43-18.24,4.44L286.66,342.91z"/>
          <path fill="#057CC0" d="M308.45,513.87c0.57-2.5,1.26-5.52,1.95-8.54c4.5-19.66,9-39.33,13.52-58.98c0.31-1.36,0.72-2.71,1.29-3.98
		c0.82-1.83,2.32-2.87,4.34-2.28c2.13,0.61,1.72,2.47,1.39,4.01c-1.39,6.44-2.86,12.86-4.33,19.28c-3.59,15.67-7.19,31.34-10.82,47
		c-0.43,1.83-0.77,3.75-1.98,5.29c-0.94,1.2-2.2,1.72-3.71,1.3C308.85,516.61,308.47,515.62,308.45,513.87z"/>
          <path fill="#057CC0" d="M286.64,342.88c-0.05,0.08-0.09,0.17-0.16,0.22c-0.03,0.02-0.12-0.04-0.18-0.07c0.12-0.04,0.24-0.09,0.35-0.13
		C286.66,342.91,286.64,342.88,286.64,342.88z"/>

        </g>
      </svg>
      {openNav ? null :
        <Stack alignItems='center' justifyContent='center' direction='column'>
          <Typography display='flex' variant='body2'>Hạo Phương CORP</Typography>
          <Typography display='flex' variant='body2'>Think Together</Typography>
        </Stack>}
    </Box>
  );

  if (disabledLink) {
    return <>{logo}</>;
  }


  const navigateToExternalPage = (url) => {
    setLoading(true)
    window.location.href = url;
  }

  const currentURL = window.location.href;
  const linkPath = currentURL === 'http://localhost:3000/login' ? '/' : null;
  const handleLogoClick = () => {
    if (currentURL !== 'http://localhost:3000/login') {
      navigateToExternalPage('https://erp.haophuong.com/web#home');
    }
  };
  return (
    <Tooltip title='Quay về ERP'>
      <Link to={linkPath} onClick={handleLogoClick}
        component={RouterLink} sx={{ display: 'contents' }}>
        {logo}
      </Link>
    </Tooltip>
  );
});

Logo.propTypes = {
  sx: PropTypes.object,
  disabledLink: PropTypes.bool,
};

export default Logo;
